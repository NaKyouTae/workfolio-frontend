syntax = "proto3";

import "common.proto";
import "attachment.proto";

package com.spectrum.workfolio.proto;

option java_multiple_files = true;
option java_package = "com.spectrum.workfolio.proto.turn_over";
option java_outer_classname = "TurnOverProto";

message TurnOverUpsertRequest {
  message MemoRequest {
    optional string id = 1;
    string content = 2;
    bool is_visible = 3;
    uint32 priority = 4;
  }

  message TurnOverGoalRequest {
    message SelfIntroductionRequest {
      optional string id = 1;
      string question = 2;
      string content = 3;
      bool is_visible = 4;
      uint32 priority = 5;
    }

    message InterviewQuestionRequest {
      optional string id = 1;
      string question = 2;
      string answer = 3;
      bool is_visible = 4;
      uint32 priority = 5;
    }

    message CheckListRequest {
      optional string id = 1;
      bool checked = 2;
      string content = 3;
      bool is_visible = 4;
      uint32 priority = 5;
    }

    optional string id = 1;
    string reason = 2;
    string goal = 3;
    repeated SelfIntroductionRequest self_introductions = 4;
    repeated InterviewQuestionRequest interview_questions = 5;
    repeated CheckListRequest check_list = 6;
    repeated MemoRequest memos = 7;
    repeated AttachmentRequest attachments = 8;
  }

  message TurnOverChallengeRequest {
    message JobApplicationRequest {
      message ApplicationStageRequest {
        optional string id = 1;
        string name = 2;
        ApplicationStage.ApplicationStageStatus status = 3;
        optional uint64 started_at = 4;
        string memo = 5;
        bool is_visible = 6;
        uint32 priority = 7;
      }

      optional string id = 1;
      string name = 2;
      string position = 3;
      string job_posting_title = 4;
      string job_posting_url = 5;
      optional uint64 started_at = 6;
      optional uint64 ended_at = 7;
      string application_source = 8;
      string memo = 9;
      repeated ApplicationStageRequest application_stages = 10;
      bool is_visible = 11;
      uint32 priority = 12;
      JobApplication.JobApplicationStatus status = 13;
    }

    optional string id = 1;
    repeated JobApplicationRequest job_applications = 2;
    repeated MemoRequest memos = 3;
    repeated AttachmentRequest attachments = 4;
  }

  message TurnOverRetrospectiveRequest {
    optional string id = 1;
    string name = 2;
    uint32 salary = 3;
    string position = 4;
    string job_title = 5;
    string rank = 6;
    string department = 7;
    string reason = 8;
    uint32 score = 9;
    string review_summary = 10;
    optional uint64 joined_at = 11;
    string work_type = 12;
    TurnOverRetrospective.EmploymentType employment_type = 13;

    repeated MemoRequest memos = 14;
    repeated AttachmentRequest attachments = 15;
  }

  optional string id = 1;
  string name = 2;
  TurnOverGoalRequest turn_over_goal = 3;
  TurnOverChallengeRequest turn_over_challenge = 4;
  TurnOverRetrospectiveRequest turn_over_retrospective = 5;
}

message TurnOverListResponse {
  repeated TurnOver turn_overs = 1;
}

message TurnOverDetailListResponse {
  repeated TurnOverDetail turn_overs = 1;
}

message TurnOverResponse {
  TurnOver turn_over = 1;
}


message TurnOverDetailResponse {
  TurnOverDetail turn_over = 1;
}